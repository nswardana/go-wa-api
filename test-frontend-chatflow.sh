#!/bin/bash

# Frontend ChatFlow Test
# Comprehensive frontend testing after brand migration

echo "ğŸ§ª Frontend ChatFlow Test"
echo "=========================="

# Check if frontend is running
echo "ğŸ” Checking frontend server..."
if curl -s http://localhost:3000 > /dev/null 2>&1; then
    echo "âœ… Frontend server running on port 3000"
else
    echo "âŒ Frontend server not running"
    echo "Starting frontend server..."
    cd frontend && npm start &
    sleep 10
fi

echo ""
echo "ğŸŒ Opening Frontend Application..."
echo "================================"

# Open browser with frontend
if command -v open > /dev/null 2>&1; then
    # macOS
    open http://localhost:3000
elif command -v xdg-open > /dev/null 2>&1; then
    # Linux
    xdg-open http://localhost:3000
elif command -v start > /dev/null 2>&1; then
    # Windows
    start http://localhost:3000
else
    echo "Please open browser manually: http://localhost:3000"
fi

echo ""
echo "ğŸ“‹ Frontend ChatFlow Test Checklist:"
echo "=================================="
echo ""
echo "ğŸ¨ 1. Branding & UI Test:"
echo "   âœ“ Browser title shows 'ChatFlow - Business Messaging Platform'"
echo "   âœ“ Login page shows 'Welcome to ChatFlow Dashboard'"
echo "   âœ“ Copyright shows 'Â© ChatFlow'"
echo "   âœ“ Admin email shows 'admin@chatflow.com'"
echo "   âœ“ All UI elements use ChatFlow branding"
echo ""
echo "ğŸ” 2. Authentication Test:"
echo "   âœ“ Login form loads correctly"
echo "   âœ“ Validation messages work"
echo "   âœ“ Login with: admin@example.com / Admin123"
echo "   âœ“ Successful login redirects to dashboard"
echo "   âœ“ Failed login shows error messages"
echo "   âœ“ Logout functionality works"
echo ""
echo "ğŸ“± 3. Navigation Test:"
echo "   âœ“ Sidebar menu items display correctly"
echo "   âœ“ Navigation to Dashboard works"
echo "   âœ“ Navigation to Phones works"
echo "   âœ“ Navigation to Messages works"
echo "   âœ“ Navigation to Templates works"
echo "   âœ“ Navigation to API Keys works"
echo "   âœ“ Navigation to Scheduled Messages works"
echo "   âœ“ Navigation to External WhatsApp works"
echo "   âœ“ Navigation to Users works"
echo "   âœ“ Navigation to Settings works"
echo ""
echo "ğŸ¯ 4. Dashboard Test:"
echo "   âœ“ User info displays correctly"
echo "   âœ“ Statistics cards show data"
echo "   âœ“ Charts render properly"
echo "   âœ“ Recent activities display"
echo "   âœ“ Quick actions work"
echo ""
echo "ğŸ“± 5. Phone Management Test:"
echo "   âœ“ Phone list displays"
echo "   âœ“ Add Phone dialog opens"
echo "   âœ“ Phone form validation works"
echo "   âœ“ QR code generation works"
echo "   âœ“ Phone status updates"
echo "   âœ“ Phone deletion works"
echo "   âœ“ Real-time status updates"
echo ""
echo "ğŸ’¬ 6. Messages Test:"
echo "   âœ“ Message list displays"
echo "   âœ“ Send Message dialog opens"
echo "   âœ“ Phone selection works"
echo "   âœ“ Recipient input works"
echo "   âœ“ Message composition works"
echo "   âœ“ Message sending works"
echo "   âœ“ Message history displays"
echo "   âœ“ Search/filter works"
echo ""
echo "ğŸ“ 7. Templates Test:"
echo "   âœ“ Template list displays"
echo "   âœ“ Create Template dialog opens"
echo "   âœ“ Template form validation works"
echo "   âœ“ Template creation works"
echo "   âœ“ Template editing works"
echo "   âœ“ Template deletion works"
echo "   âœ“ Variable placeholders work"
echo ""
echo "ğŸ”‘ 8. API Keys Test:"
echo "   âœ“ API key list displays"
echo "   âœ“ Create API Key dialog opens"
echo "   âœ“ API key generation works"
echo "   âœ“ Permission settings work"
echo "   âœ“ API key regeneration works"
echo "   âœ“ API key deletion works"
echo ""
echo "â° 9. Scheduled Messages Test:"
echo "   âœ“ Scheduled list displays"
echo "   âœ“ Schedule Message dialog opens"
echo "   âœ“ Time picker works"
echo "   âœ“ Message scheduling works"
echo "   âœ“ Schedule editing works"
echo "   âœ“ Schedule deletion works"
echo "   âœ“ Status tracking works"
echo ""
echo "ğŸ”„ 10. Session Handling Test:"
echo "   âœ“ Login maintains session after refresh"
echo "   âœ“ Loading spinner shows during session check"
echo "   âœ“ Logout clears session"
echo "   âœ“ Multiple tabs sync session"
echo "   âœ“ Invalid session redirects to login"
echo ""
echo "ğŸ“± 11. Responsive Design Test:"
echo "   âœ“ Desktop layout works correctly"
echo "   âœ“ Tablet layout adapts properly"
echo "   âœ“ Mobile layout works correctly"
echo "   âœ“ Sidebar toggle works on mobile"
echo "   âœ“ Touch interactions work"
echo ""
echo "ğŸ” 12. Browser Dev Tools Test:"
echo "   âœ“ Console shows no JavaScript errors"
echo "   âœ“ Network tab shows successful API calls"
echo "   âœ“ Application tab shows correct localStorage"
echo "   âœ“ Elements tab renders correctly"
echo "   âœ“ No 404 errors for assets"
echo ""
echo "ğŸ¯ 13. Performance Test:"
echo "   âœ“ Page load times are acceptable"
echo "   âœ“ Animations are smooth"
echo "   âœ“ No memory leaks detected"
echo "   âœ“ Responsive images load properly"
echo "   âœ“ API responses are fast"
echo ""
echo "ğŸŒ Frontend Test URLs:"
echo "========================"
echo "Main Application: http://localhost:3000"
echo "Login Page:      http://localhost:3000/login"
echo "Dashboard:       http://localhost:3000/dashboard"
echo "Phones:          http://localhost:3000/phones"
echo "Messages:        http://localhost:3000/messages"
echo "Templates:       http://localhost:3000/templates"
echo "API Keys:        http://localhost:3000/api-keys"
echo "Schedules:       http://localhost:3000/schedules"
echo "External WhatsApp: http://localhost:3000/external-whatsapp"
echo "Users:           http://localhost:3000/users"
echo "Settings:         http://localhost:3000/settings"
echo ""
echo "ğŸ”§ Test Instructions:"
echo "===================="
echo "1. Open browser at http://localhost:3000"
echo "2. Test all checklist items above"
echo "3. Use browser dev tools (F12) to monitor"
echo "4. Report any issues or errors found"
echo "5. Verify ChatFlow branding throughout"
echo ""
echo "âœ… Frontend ChatFlow Test Ready!"
echo "================================"
echo "ğŸŒ Browser opened with: http://localhost:3000"
echo "ğŸ“‹ Follow checklist above for comprehensive testing!"
echo "ğŸ” Use browser dev tools to monitor issues!"
echo "ğŸ¯ Test all ChatFlow functionality thoroughly!"
